# ## Technical Architecture Brief: The Floyd Mobile "Bridge" & NGROK Integration
1\. The Strategic Shift: From Desktop Sessions to Mobile Autonomy
At Legacy AI, we’ve always been about reclaiming AI autonomy. We’re a tiny microsaas shop tucked away in Brown County, Indiana—a place where the population is lovely, but the downtown is literally one building and it’s usually closed. That isolation taught us the value of independence. We built Floyd because we realized most premium AI tools are just "API calls in a trench coat," and we were tired of paying a car payment every month for the privilege of being rate-limited. By engineering the Floyd Mobile "Bridge," we are extending "Zen Mode" focus beyond the workstation. Mobile accessibility isn't a "feature"—it’s the final step in untethering the developer from the desk, ensuring the "Software Creation Machine" is available whether you’re in the office or out in the sticks.The core problem we’re solving is the "tethered developer" constraint. Until now, high-performance, context-aware agentic workflows required you to be sat in front of a terminal or a desktop web interface. This tether aligns perfectly with expensive, restricted third-party platforms that want to own your session data. Floyd rejects that. By moving the interface to mobile while keeping the compute local, we provide a self-hosted alternative that avoids the "grocery budget" subscription model. To make this work, however, we had to solve the networking hurdles of connecting a locked-down mobile device to a home-based "Brain" without compromising security.
2\. The Infrastructure: "Bring Your Own Tunnel" via NGROK
Our solution for bridging the gap between a local environment and a mobile device is NGROK. We chose NGROK because it allows developers to create secure, encrypted tunnels to local environments—like a Floyd Desktop session running on localhost:5175—without messing with complex firewall rules or exposing home IP addresses to the open web. It fits our "scrappy" ethos: it’s robust, developer-first, and stays out of the way.Floyd’s architecture, built on TypeScript and the Model Context Protocol (MCP), treats the NGROK tunnel as a standardized pipeline. In this setup, the mobile app functions as a remote MCP client consuming the resources of the local machine’s MCP server. By transforming a local endpoint into a globally accessible (but authenticated) URL, we allow the mobile device to command the user’s primary hardware as if it were sitting on the same bus.| Category | Standard Subscription-Based Cloud AI | Floyd + NGROK Tunneling || ------ | ------ | ------ || **Data Sovereignty** | Data hosted/stored on third-party servers. | **Total Sovereignty:**  Data never leaves your machine. || **Connectivity Method** | Proprietary web/app login (Closed). | Secure NGROK Tunnel to local environment (BYO). || **Cost** | "Grocery budget" or "Car payment" pricing. | **"Pennies":**  You only pay for raw compute via BYOK. |
While the tunnel provides the path, a handshake is required to ensure that only your authorized mobile device can talk to your local instance.
3\. The QR Handshake: Secure Session Handoff
The QR code is the tactical shortcut that makes the mobile bridge viable for engineers. We don't do tedious manual configurations. The handshake is a one-shot authentication and configuration pass that allows the mobile app to "mirror" the state of the CLI or Desktop immediately.**The Handshake Protocol:**
1. **Encryption:**  The local Floyd instance generates a temporary, cryptographically signed NGROK URL.
2. **Encoding:**  The QR code encodes the Tunnel URL, the active Session ID, and a temporary Access Token.
3. **The Mobile Capture:**  The mobile app parses this metadata to establish an instant, authenticated connection to the local MCP server.This approach follows our runtime_schema_gen philosophy: stop guessing and sample reality. Just as runtime_schema_gen analyzes live API data to prevent "hallucination loops," the QR handshake ensures the mobile app has "One-Shot Accuracy" regarding the local environment.**Benefits of One-Shot Accuracy:**
* **Latency Reduction:**  Eliminates multi-step authentication handshakes over mobile networks.
* **Token Conservation:**  Prevents the agent from re-fetching environment metadata, saving thousands of context tokens.
* **Reliability:**  Guarantees the mobile client is perfectly synced with the specific runtime schema of the local session.

⠀4. Persistent Intelligence: SuperCaching™ Across the Bridge
The connective tissue of this bridge is  **SuperCaching™** , Floyd’s multi-tiered memory architecture. Without it, a mobile app is just a dumb terminal. With it, the app "knows" exactly what you were doing when you walked away from your desk.SuperCaching™ persists state through three distinct tiers:
* **Reasoning (5 min):**  Holds the immediate context of active, back-and-forth conversations.
* **Project (24 hrs):**  Maintains session work, allowing for seamless handoffs between the desktop and the mobile app.
* **Vault (7 days):**  Stores reusable patterns and coding habits locally on your machine.To solve the bandwidth constraints of mobile networks, we leverage the project_map. Instead of forcing the mobile device to perform expensive file-tree recursions over a 5G connection, Floyd streams the project_map as a cached JSON object. This provides the app with "spatial awareness"—the mobile device knows the directory structure and file relationships without needing to re-scan the codebase, keeping the experience snappy even on high-latency networks.

⠀5. Mobile Agentic Monitoring: Browork and Visual Verification
Real-time monitoring is a core Floyd habit, rooted in our use of TMUX dual-screen mode on the desktop. When you're "out and about," the mobile bridge allows you to watch Floyd think and oversee your Browork sub-agents—that "team of tiny helpers" working in parallel.The visual_verify tool and tui_puppeteer (the "Ghost User") are the stars of the mobile interface. On a phone, you can receive "Snapshots" of the TUI/GUI state to verify progress without reading raw logs. More importantly, the tui_puppeteer allows for  **remote terminal orchestration** . If an agent gets stuck at a prompt, you don’t need to wait until you’re home; you can use the mobile app to:
* **Synchronize**  remote state with local terminal inputs.
* **Intercept**  blocked processes by injecting state-dependent input sequences.
* **Remediate**  agent stalls by remotely "pressing" Enter or TAB through complex terminal sequences.
* **Override**  automated decisions in real-time via state-dependent input injection.

⠀6. Security & Sovereignty: The "Legacy AI" Guardrails
This mobile bridge adheres strictly to the "Self-Hosted Framework" and "Bring Your Own Key" (BYOK) philosophy of the Floyd Manifesto. We refuse to build "rent-seeker" tools.The mobile app is a "Thin Client." It does not store your OPENAI_API_KEY or the local ~/.floyd/cache internally. It merely streams access to the local "Brain" residing on your primary machine. Because the keys never leave your home hardware, your security model remains uncompromised. You get total session persistence with zero markup and zero "trench coat" API middle-men.**Final Technical Note:**   **This bridge is an experimental "Little Nashville" innovation. It is built for engineers who refuse to pay rent for their tools and demand the freedom to manage their own local workflows. Use with caution, git commit often, and stay scrappy.**
